<html>
<head>
<title>virtual box</title>
<style></style>
<link  rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
<div align="left">

<img src="image/welcome.gif"
width="210" height="88" alt="welcome">
<br><br>

<hr width="500">
<a href="index.html">トップ</a>
    <a href="about.html">プロフィール</a>
    <a href="link.html">リンク集</a><br>
<hr width="500"><br><br>



<section>
pub/sub通信<br>
<ul>
  <li>publishのプログラム
  <li>Subscribeのプログラム
  <li>インスタンス関数について
</ul>
<br><br>

<hr width="500">
<h2>Publishのプログラム</h2>
<p>今回はpythonでpub/subを行うプログラムを作成した。主に必要なコマンドは
  <ul>
    <li>self.Publish("topic名", data型, queue_size=1)
    <li>self.bridge = CvBridge() ROS_imageをOpenCV_imageに変換する
    <li>self.image_pub.publish(self.bridge.cv2_to_imgmsm(image名, "bgr8"))
  </ul>
  である。selfは_init_関数でインスタンス化する処理を行っている。詳しくは<a href = "https://qiita.com/MENDY/items/3a7159f3f032af05c69b">こちら</a>
  を参考にしたため確認してください。<br>
</p>
<h2>Subscribeのプログラム</h2>
<p>次に、Subscribeについてである。主に必要なコマンドは
  <ul>
    <li>self.image名 = rospy.Subscriber("data_path", data型, self.callback) *callbackはdata受信後に呼ばれる関数である。
    <li>self.画像名 = self.bridge.imgmsg_to_cv2(data名, "bgr8")
    <li>インスタンス名 = class名()
  </ul>
  である。class内にインスタンス関数を入れてclass名.~~というコマンドを使うようにすればうまくいく。<br>
</p>

<h2>インスタンス関数</h2>
<p>最後にインスタンス関数である。参考にしたページではインスタンス関数を用いて表現している。これは、self.~.publishなど自分が送りたいときに呼びやすいためだと考えられる。このため、
インスタンス関数についてわからない場合は<a href = "https://python.ms/init/#step-4-init-%E3%81%A3%E3%81%A6%E3%81%AA%E3%81%AB%EF%BC%9F">こちら</a>を参考にするとよい。

</p>

<h2>gazebo</h2>
    <h3>シミュレーション環境を導入する</h3>
    <p>UMapで使っている3Dワイヤーフレームの環境をgazeboに導入する。<br>
      <ul>
        <li><a href = "https://qiita.com/srs/items/9b23ad12bea9e3ec0480">urdfファイルとsdfファイルを準備する</a>
        <li><a href = "https://qiita.com/RyodoTanaka/items/cad2cf100dd916d56717">STLデータ</a>
        <li><a href = "https://qiita.com/RyodoTanaka/items/b1ebd48da81669db7409">CLLADA</a>
        <li><a href = "http://answers.gazebosim.org/question/7751/importing-cad-model-in-gazebo/">.stlまたは.plyを.daeへblenderを用いて変更する</a>
        <br>

      STL形式は形状だけの情報である。ROSでは全体の色のみ適用可能でテクスチャを適用することができない。また、ROSではバイナリ型のSTLファイルした取り扱うことができない。<br>
      COLLADAはROSでは形状とテクスチャの情報を適用することのできる形式である。CADでSTLを出力した後、Blenderなどのソフトを使い、テクスチャを追加する。<br>
      注意点はどちらもm(メートル)谷で出力しなければならないという点である。<br>
      環境として壁や障害物を置くときは<a href = "http://answers.gazebosim.org/question/7751/importing-cad-model-in-gazebo/">.worldファイルを作成する</a><br>
<hr width="500">
  <br>
  <br>
</p>



</div>



</body>
</html>
